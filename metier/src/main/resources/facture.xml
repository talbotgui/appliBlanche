<?xml version = "1.0" encoding = "UTF-8"?>
<!-- <jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  -->
<!--  xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports jasperreport.xsd http://jasperreports.sourceforge.net/jasperreports/components components.xsd" -->
<!--  name="jasper_report_template" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20"> -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd"
 name="jasper_report_template" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">

 <!-- Description des datasets -->
 <subDataset name="LigneDeFacturePdfDto">
  <field name="categorie" class="java.lang.String"></field>
  <field name="libelle" class="java.lang.String"></field>
  <field name="montantTotal" class="java.lang.String"></field>
  <field name="montantUnitaire" class="java.lang.String"></field>
  <field name="quantite" class="java.lang.String"></field>
  <field name="isPaiement" class="java.lang.Boolean"></field>
 </subDataset>
 <subDataset name="LignePaiementDto">
  <field name="dateCreation" class="java.lang.String"></field>
  <field name="montant" class="java.lang.String"></field>
  <field name="moyenDePaiement" class="java.lang.String"></field>
 </subDataset>

 <!-- Liste des paramètres attendus -->
 <parameter name="client" isForPrompting="false" class="java.lang.String"></parameter>
 <parameter name="dates" isForPrompting="false" class="java.lang.String"></parameter>
 <parameter name="lignesFacturees" isForPrompting="false" class="java.util.Collection"></parameter>
 <parameter name="lignesPaiements" isForPrompting="false" class="java.util.Collection"></parameter>

 <!-- Entete de page avec les détails de la réservation --> 
 <title>
  <band height="60">
   <staticText>
    <reportElement mode="Opaque" x="0" y="0" width="300" height="17" backcolor="#70A9A9"/><box /><textElement textAlignment="Left" verticalAlignment="Middle"/>
    <text><![CDATA[Détails du séjour]]></text>
   </staticText>
   <staticText>
    <reportElement mode="Opaque" x="0" y="20" width="40" height="17"/><box /><textElement textAlignment="Left" verticalAlignment="Middle"/>
    <text><![CDATA[Client : ]]></text>
   </staticText>
   <textField>
    <reportElement mode="Opaque" x="40" y="20" width="260" height="17"/><box /><textElement textAlignment="Left" verticalAlignment="Middle"/>
    <textFieldExpression class="java.lang.String"><![CDATA[$P{client}]]></textFieldExpression>
   </textField>
   <staticText>
    <reportElement mode="Opaque" x="0" y="40" width="40" height="17"/><box /><textElement textAlignment="Left" verticalAlignment="Middle"/>
    <text><![CDATA[Dates : ]]></text>
   </staticText>
   <textField>
    <reportElement mode="Opaque" x="40" y="40" width="260" height="17"/><box /><textElement textAlignment="Left" verticalAlignment="Middle"/>
    <textFieldExpression class="java.lang.String"><![CDATA[$P{dates}]]></textFieldExpression>
   </textField>
  </band>
 </title>

<!-- <pageHeader></pageHeader> -->
<!-- <columnHeader></columnHeader> -->

 <detail>
  <band height="400" splitType="Stretch">
  
   <!-- Tableaux des lignes facturées -->
   <componentElement>
    <reportElement key="tableLignesFacturees" x="108" y="30" width="450" height="50"/>
    <jr:table>
     <datasetRun subDataset="LigneDeFacturePdfDto"><dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{lignesFacturees})]]></dataSourceExpression></datasetRun>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Catégorie]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{categorie}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Libellé]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{libelle}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Prix unitaire]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{montantUnitaire}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Quantité]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{quantite}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Montant total]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{montantTotal}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
    </jr:table>
   </componentElement>
  
   <!-- Tableaux des lignes de paiement -->
   <componentElement>
    <reportElement key="tableLignesPaiement" x="108" y="300" width="450" height="50"/>
    <jr:table>
     <datasetRun subDataset="LignePaiementDto"><dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{lignesPaiements})]]></dataSourceExpression></datasetRun>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Date]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{dateCreation}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Moyen de paiement]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{moyenDePaiement}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
     <jr:column width="90">
      <jr:tableHeader height="30" rowSpan="1"><staticText><reportElement x="0" y="0" width="90" height="30"/><text><![CDATA[Montant]]></text></staticText></jr:tableHeader>
      <jr:detailCell height="30" rowSpan="1"><textField isStretchWithOverflow="true"><reportElement x="0" y="0" width="90" height="20"/><textFieldExpression><![CDATA[$F{montant}]]></textFieldExpression></textField></jr:detailCell>
     </jr:column>
    </jr:table>
   </componentElement>
  </band>
 </detail>
 
<!--  <columnFooter></columnFooter> -->
<!--  <pageFooter></pageFooter> -->
<!--  <lastPageFooter></lastPageFooter> -->
<!--  <summary></summary> -->
</jasperReport>
